<body>
  <!-- Pyxel.js を読み込む -->
  <script src="https://cdn.jsdelivr.net/gh/kitao/pyxel/wasm/pyxel.js"></script>

  <!-- Pyxel ゲームを埋め込む -->
  <pyxel-play root="https://rsakamot-star.github.io/MainPythonFile" name="main.pyxapp"></pyxel-play>

  <script>
    // Pyxel のゲームが開始された後に自動で左クリックを発生させる
    let gameStarted = false;
    let clickPerformed = false;

    // Pyxelのゲームの初期化後、左クリックを自動で行う
    function startAutoClick() {
      // ゲームが開始されたかを確認
      if (!gameStarted) {
        // Pyxel.jsが起動した後、左クリックをシミュレートする
        setTimeout(() => {
          const canvas = document.querySelector('canvas');  // Pyxelのゲームのキャンバス要素
          if (canvas) {
            const rect = canvas.getBoundingClientRect();
            // キャンバス内でクリックしたい位置を指定
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            // 左クリックをシミュレート（クリック位置を設定）
            const event = new MouseEvent('click', {
              clientX: x,
              clientY: y,
              bubbles: true,
              cancelable: true,
            });
            canvas.dispatchEvent(event);  // イベントをキャンバスに発火
            clickPerformed = true;
            console.log("Auto left-click performed!");
          }
        }, 1000);  // 1秒後にクリックを発生させる（遅延は調整可能）
      }
    }

    // Pyxelのゲームが読み込まれたら自動クリックを開始
    window.onload = function() {
      startAutoClick();
    }
  </script>
</body>
